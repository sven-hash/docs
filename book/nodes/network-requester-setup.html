<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js coal">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Network Requester - Nym Docs</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="Nym technical documentation">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../theme/pagetoc.css">
        <link rel="stylesheet" href="../././mdbook-admonish.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "coal" : "coal";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('coal')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="../introduction.html">Introduction</a></li><li class="chapter-item affix "><li class="part-title">Architecture</li><li class="chapter-item "><a href="../architecture/network-overview.html"><strong aria-hidden="true">1.</strong> Network Overview</a></li><li class="chapter-item "><a href="../architecture/traffic-flow.html"><strong aria-hidden="true">2.</strong> Mixnet Traffic Flow</a></li><li class="chapter-item "><a href="../architecture/network-rewards.html"><strong aria-hidden="true">3.</strong> Network Rewards</a></li><li class="chapter-item affix "><li class="part-title">Binaries</li><li class="chapter-item "><a href="../binaries/pre-built-binaries.html"><strong aria-hidden="true">4.</strong> Pre-built Binaries</a></li><li class="chapter-item "><a href="../binaries/building-nym.html"><strong aria-hidden="true">5.</strong> Building from Source</a></li><li class="chapter-item "><a href="../binaries/init-and-config.html"><strong aria-hidden="true">6.</strong> Binary Initialisation and Configuration</a></li><li class="chapter-item "><a href="../binaries/version-compatiblity.html"><strong aria-hidden="true">7.</strong> Version Compatibility Table</a></li><li class="chapter-item affix "><li class="part-title">Nodes</li><li class="chapter-item expanded "><a href="../nodes/setup-guides.html"><strong aria-hidden="true">8.</strong> Node Setup Guides</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../nodes/mix-node-setup.html"><strong aria-hidden="true">8.1.</strong> Mix Node</a></li><li class="chapter-item "><a href="../nodes/gateway-setup.html"><strong aria-hidden="true">8.2.</strong> Gateway</a></li><li class="chapter-item expanded "><a href="../nodes/network-requester-setup.html" class="active"><strong aria-hidden="true">8.3.</strong> Network Requester</a></li><li class="chapter-item "><a href="../nodes/validator-setup.html"><strong aria-hidden="true">8.4.</strong> Validator</a></li></ol></li><li class="chapter-item "><a href="../nodes/troubleshooting.html"><strong aria-hidden="true">9.</strong> Troubleshooting</a></li><li class="chapter-item affix "><li class="part-title">Clients</li><li class="chapter-item "><a href="../clients/overview.html"><strong aria-hidden="true">10.</strong> Clients Overview</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../clients/websocket-client.html"><strong aria-hidden="true">10.1.</strong> Websocket</a></li><li class="chapter-item "><a href="../clients/socks5-client.html"><strong aria-hidden="true">10.2.</strong> Socks5</a></li><li class="chapter-item "><a href="../clients/webassembly-client.html"><strong aria-hidden="true">10.3.</strong> Webassembly</a></li></ol></li><li class="chapter-item "><a href="../clients/addressing-system.html"><strong aria-hidden="true">11.</strong> Addressing System</a></li><li class="chapter-item affix "><li class="part-title">SDK</li><li class="chapter-item "><a href="../sdk/typescript.html"><strong aria-hidden="true">12.</strong> Typescript SDK</a></li><li class="chapter-item "><a href="../sdk/rust.html"><strong aria-hidden="true">13.</strong> Rust SDK (coming soon)</a></li><li class="chapter-item affix "><li class="part-title">Wallet</li><li class="chapter-item "><a href="../wallet/desktop-wallet.html"><strong aria-hidden="true">14.</strong> Desktop Wallet</a></li><li class="chapter-item "><a href="../wallet/cli-wallet.html"><strong aria-hidden="true">15.</strong> CLI Wallet</a></li><li class="chapter-item affix "><li class="part-title">Explorers</li><li class="chapter-item "><a href="../explorers/mixnet-explorer.html"><strong aria-hidden="true">16.</strong> Mixnet Explorer</a></li><li class="chapter-item "><div><strong aria-hidden="true">17.</strong> Blockchain Explorers</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><div><strong aria-hidden="true">17.1.</strong> Nodes Guru</div></li><li class="chapter-item "><div><strong aria-hidden="true">17.2.</strong> TODO Others</div></li></ol></li><li class="chapter-item "><li class="part-title">Nyx Blockchain</li><li class="chapter-item "><a href="../nyx/interacting-with-chain.html"><strong aria-hidden="true">18.</strong> Interacting with Nyx Chain and Smart Contracts</a></li><li class="chapter-item "><a href="../nyx/smart-contracts.html"><strong aria-hidden="true">19.</strong> Smart Contracts</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../nyx/mixnet-contract.html"><strong aria-hidden="true">19.1.</strong> Mixnet Contract</a></li><li class="chapter-item "><a href="../nyx/vesting-contract.html"><strong aria-hidden="true">19.2.</strong> Vesting Contract</a></li></ol></li><li class="chapter-item "><a href="../nyx/rpc-node.html"><strong aria-hidden="true">20.</strong> RPC Nodes</a></li><li class="chapter-item affix "><li class="part-title">Tools</li><li class="chapter-item "><a href="../tools/nym-cli.html"><strong aria-hidden="true">21.</strong> NymCLI</a></li><li class="spacer"></li><li class="chapter-item affix "><li class="part-title">Misc.</li><li class="chapter-item "><a href="../coc.html"><strong aria-hidden="true">22.</strong> Code of Conduct</a></li><li class="chapter-item "><a href="../licensing.html"><strong aria-hidden="true">23.</strong> Licensing</a></li><li class="spacer"></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Nym Docs</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main><div class="sidetoc"><nav class="pagetoc"></nav></div>
                        <h1 id="network-requesters"><a class="header" href="#network-requesters">Network Requesters</a></h1>
<blockquote>
<p>The Nym network requester was built in the <a href="../binaries/building-nym.html">building nym</a> section. If you haven’t yet built Nym and want to run the code on this page, go there first.</p>
</blockquote>
<h2 id="anatomy-of-a-network-requester-service"><a class="header" href="#anatomy-of-a-network-requester-service">Anatomy of a network requester service</a></h2>
<p>The network requester allows Nym users to make outbound network requests from your server.</p>
<p>The network requester is <strong>not</strong> an open proxy. It ships with a file called <code>allowed.list.sample</code>, which contains URLs used by the Blockstream Green and Electrum cryptographic wallets, which can be modified with the URLs of the web services it will connect to according to the maintainer of that instance.</p>
<p>A network requester service is comprised of 2 Nym binaries running on one VPS: </p>
<ul>
<li><code>nym-client</code> </li>
<li><code>nym-network-requester</code></li>
</ul>
<p>The <code>nym-network-requester</code> binary listens and sends responses to the <code>nym-client</code>, which is how it connects to the mixnet. </p>
<h2 id="nym-client"><a class="header" href="#nym-client">Nym client</a></h2>
<p>Before initalising your network requester, you must initalise and run an instance of the <code>nym-client</code> binary for it to communicate with. This would have been built in the same <code>build</code> process that built the <code>network-requester</code>. </p>
<h3 id="initialising-your-nym-client"><a class="header" href="#initialising-your-nym-client">Initialising your nym client</a></h3>
<p>First initialise your client with the command below (if you want to connect to a specific gateway, include the <code>--gateway</code> flag): </p>
<pre><code> ./nym-client init --id &lt;id&gt;
</code></pre>
<details id="admonition-console-output" class="admonition example">
<summary class="admonition-title">
<p>Console output</p>
<p><a class="admonition-anchor-link" href="#admonition-console-output"></a></p>
</summary>
<div>
<pre><code>Initialising client...
Saved all generated keys
Saved configuration file to &quot;/home/nym/.nym/clients/requester-client/config/config.toml&quot;
Using gateway: 8yGFbT5feDpPmH66TveVjonpUn3tpvjobdvEWRbsTH9i
Client configuration completed.

The address of this client is: BUVD1uAXEWSfMDdewwfxUAd6gSsEfHHPvnsV8LTfe9ZG.DaY9kqXREEkvpJ1Nv3nrfxF6HDamsJmtZQDFuyTAXwJZ@8yGFbT5feDpPmH66TveVjonpUn3tpvjobdvEWRbsTH9i

</code></pre>
</div>
</details>
<h3 id="running-your-nym-client"><a class="header" href="#running-your-nym-client">Running your nym client</a></h3>
<p>You can check that your client is initialised correctly by running the following command and checking it starts up correctly: </p>
<pre><code>./nym-client run --id &lt;id&gt;
</code></pre>
<details id="admonition-console-output-1" class="admonition example">
<summary class="admonition-title">
<p>Console output</p>
<p><a class="admonition-anchor-link" href="#admonition-console-output-1"></a></p>
</summary>
<div>
<pre><code>   _ __  _   _ _ __ ___
  | '_ \| | | | '_ \ _ \
  | | | | |_| | | | | | |
  |_| |_|\__, |_| |_| |_|
        |___/

        (client - version 1.1.4)

        
2022-08-09T15:06:03.276Z INFO  nym_client::client &gt; Starting nym client
2022-08-09T15:06:03.293Z INFO  nym_client::client &gt; Obtaining initial network topology
2022-08-09T15:06:04.957Z INFO  nym_client::client &gt; Starting topology refresher...
2022-08-09T15:06:04.957Z INFO  nym_client::client &gt; Starting received messages buffer controller...
</code></pre>
</div>
</details>
<h3 id="automating-your-client-with-systemd"><a class="header" href="#automating-your-client-with-systemd">Automating your client with systemd</a></h3>
<p>Stop the running process with <code>CTRL-C</code>, and create a service file at <code>/etc/systemd/system/nym-client.service</code> so you don’t have to manually restart your client if your server reboots or the process is killed for some reason: </p>
<pre><code class="language-ini">[Unit]
Description=Nym Client (1.1.4)
StartLimitInterval=350
StartLimitBurst=10

[Service]
User=nym # replace this with whatever user you wish 
LimitNOFILE=65536
ExecStart=/home/nym/nym-client run --id requester-client # remember to check the path to your nym-client binary and the id of your client 
KillSignal=SIGINT
Restart=on-failure
RestartSec=30

[Install]
WantedBy=multi-user.target
</code></pre>
<p>Then enable and start your client with the following commands: </p>
<pre><code>systemctl enable nym-client.service
systemctl start nym-client.service

# you can always check your client has succesfully started with: 
systemctl status nym-client.service
</code></pre>
<p>With <code>systemctl status nym-client.service</code> you should be able to see the address of the client at startup. Alternatively you can use <code>journalctl -t nym-client -o cat -f</code> to get the output of the client in your console as it comes in. </p>
<p>Make a note of the client’s address:</p>
<pre><code> 2021-07-10T14:45:50.131 INFO  nym_client::client              &gt; The address of this client is: BLJ6SrgbaYjb7Px32G7zSZnocuim3HT9n3ocKcwQHETd.4WAAh7xRxWVeiohcw44G8wQ5bGHMEvq8j9LctDkGKUC7@8yGFbT5feDpPmH66TveVjonpUn3tpvjobdvEWRbsTH9i
</code></pre>
<h2 id="network-requester"><a class="header" href="#network-requester">Network requester</a></h2>
<h3 id="running-your-network-requester-standard-mode"><a class="header" href="#running-your-network-requester-standard-mode">Running your network requester (standard mode)</a></h3>
<div id="admonition-caution" class="admonition warning">
<div class="admonition-title">
<p>Caution</p>
<p><a class="admonition-anchor-link" href="#admonition-caution"></a></p>
</div>
<div>
<p>If you are following these instructions to set up a requester as part of a Service Grant, <strong>ignore these instructions and jump to the step <a href="./network-requester-setup.html#running-your-network-requester-stats-mode">below</a></strong></p>
</div>
</div>
<p>Now that we have a running client for the requester to listen to, we can start it with the following command: </p>
<pre><code> ./nym-network-requester run  
</code></pre>
<details id="admonition-console-output-2" class="admonition example">
<summary class="admonition-title">
<p>Console output</p>
<p><a class="admonition-anchor-link" href="#admonition-console-output-2"></a></p>
</summary>
<div>
<pre><code>Starting socks5 service provider:
2021-08-11T13:28:02.767Z INFO  nym_network_requester::core &gt; * connected to local websocket server at ws://localhost:1977

All systems go. Press CTRL-C to stop the server.
</code></pre>
</div>
</details>
<p>As you can see, it has connected to the nym client that we started before. </p>
<h3 id="running-your-network-requester-stats-mode"><a class="header" href="#running-your-network-requester-stats-mode">Running your network requester (stats mode)</a></h3>
<p>Now that we have a running client for the requester to listen to, we can start it with the following command. </p>
<pre><code> ./nym-network-requester run --enable-statistics
</code></pre>
<details id="admonition-console-output-3" class="admonition example">
<summary class="admonition-title">
<p>Console output</p>
<p><a class="admonition-anchor-link" href="#admonition-console-output-3"></a></p>
</summary>
<div>
<pre><code>THE NETWORK REQUESTER STATISTICS ARE ENABLED. IT WILL COLLECT AND SEND ANONYMIZED STATISTICS TO A CENTRAL SERVER. PLEASE QUIT IF YOU DON'T WANT THIS TO HAPPEN AND START WITHOUT THE enable-statistics FLAG .

Starting socks5 service provider:
2022-08-09T12:26:45.154Z INFO  nym_network_requester::core &gt; * connected to local websocket server at ws://localhost:1977

All systems go. Press CTRL-C to stop the server.
</code></pre>
</div>
</details>
<p>As you can see, it has connected to the nym client that we started before. </p>
<p>The <code>--enable-statistics</code> flag starts the node in a mode which reports very minimal usage statistics - the amount of bytes sent to a service, and the number of requests - to a service we run, as part of the Nym Connect Beta testing. </p>
<p>Use the following command to ping our stats service to see what it has recorded (remember to change the <code>'until'</code> date): </p>
<pre><code>curl -d '{&quot;since&quot;:&quot;2022-07-26T12:46:00.000000+00:00&quot;, &quot;until&quot;:&quot;2022-07-26T12:57:00.000000+00:00&quot;}' -H &quot;Content-Type: application/json&quot; -X POST http://mainnet-stats.nymte.ch:8090/v1/all-statistics
</code></pre>
<details id="admonition-console-output-4" class="admonition example">
<summary class="admonition-title">
<p>Console output</p>
<p><a class="admonition-anchor-link" href="#admonition-console-output-4"></a></p>
</summary>
<div>
<pre><code>      [
        {
            &quot;Service&quot;:{
              &quot;requested_service&quot;:&quot;chat-0.core.keybaseapi.com:443&quot;,
              &quot;request_processed_bytes&quot;:294,
              &quot;response_processed_bytes&quot;:0,
              &quot;interval_seconds&quot;:60,
              &quot;timestamp&quot;:&quot;2022-07-26 12:55:44.459257091&quot;
            }
        },
        {
            &quot;Service&quot;:{
              &quot;requested_service&quot;:&quot;chat-0.core.keybaseapi.com:443&quot;,
              &quot;request_processed_bytes&quot;:890,
              &quot;response_processed_bytes&quot;:0,
              &quot;interval_seconds&quot;:60,
              &quot;timestamp&quot;:&quot;2022-07-26 12:56:44.459333653&quot;
            }
        },
        {
            &quot;Service&quot;:{
              &quot;requested_service&quot;:&quot;api-0.core.keybaseapi.com:443&quot;,
              &quot;request_processed_bytes&quot;:1473,
              &quot;response_processed_bytes&quot;:0,
              &quot;interval_seconds&quot;:60,
              &quot;timestamp&quot;:&quot;2022-07-26 12:56:44.459333653&quot;
            }
        },
        {
            &quot;Gateway&quot;:{
              &quot;gateway_id&quot;:&quot;Fo4f4SQLdoyoGkFae5TpVhRVoXCF8UiypLVGtGjujVPf&quot;,
              &quot;inbox_count&quot;:8,
              &quot;timestamp&quot;:&quot;2022-07-26 12:46:34.148075290&quot;
            }
        },
        {
            &quot;Gateway&quot;:{
              &quot;gateway_id&quot;:&quot;2BuMSfMW3zpeAjKXyKLhmY4QW1DXurrtSPEJ6CjX3SEh&quot;,
              &quot;inbox_count&quot;:6,
              &quot;timestamp&quot;:&quot;2022-07-26 12:46:51.578765358&quot;
            }
        },
        {
            &quot;Gateway&quot;:{
              &quot;gateway_id&quot;:&quot;Fo4f4SQLdoyoGkFae5TpVhRVoXCF8UiypLVGtGjujVPf&quot;,
              &quot;inbox_count&quot;:8,
              &quot;timestamp&quot;:&quot;2022-07-26 12:47:34.149270862&quot;
            }
        }
      ]                            
</code></pre>
</div>
</details>
<h3 id="automating-your-network-requester-with-systemd"><a class="header" href="#automating-your-network-requester-with-systemd">Automating your network requester with systemd</a></h3>
<p>Stop the running process with <code>CTRL-C</code>, and create a service file for the requester as we did with our client instance previously at <code>/etc/systemd/system/nym-network-requester.service</code>:</p>
<pre><code class="language-ini">[Unit]
Description=Nym Network Requester (1.1.4)
StartLimitInterval=350
StartLimitBurst=10

[Service]
User=nym # replace this with whatever user you wish 
LimitNOFILE=65536
# remember to add the `--enable-statistics` flag if running as part of a service grant and check the path to your nym-network-requester binary 
ExecStart=/home/nym/nym-network-requester run 
KillSignal=SIGINT
Restart=on-failure
RestartSec=30

[Install]
WantedBy=multi-user.target
</code></pre>
<p>Now enable and start your requester: </p>
<pre><code>systemctl enable nym-network-requester.service
systemctl start nym-network-requester.service

# you can always check your requester has succesfully started with: 
systemctl status nym-network-requester.service
</code></pre>
<h2 id="vps-setup"><a class="header" href="#vps-setup">VPS Setup</a></h2>
<h3 id="configure-your-firewall"><a class="header" href="#configure-your-firewall">Configure your firewall</a></h3>
<p>Although your requester is now ready to receive traffic, your server may not be - the following commands will allow you to set up a properly configured firewall using <code>ufw</code>:</p>
<pre><code># check if you have ufw installed
ufw version
# if it is not installed, install with
sudo apt install ufw -y
# enable ufw
sudo ufw enable
# check the status of the firewall
sudo ufw status
</code></pre>
<p>Finally open your requester’s p2p port, as well as ports for ssh and incoming traffic connections:</p>
<pre><code>sudo ufw allow 1789,22,9000/tcp
# check the status of the firewall
sudo ufw status
</code></pre>
<p>For more information about your requester’s port configuration, check the <a href="./network-requester-setup.html#requester-port-reference">requester port reference table</a> below.</p>
<h2 id="using-your-network-requester"><a class="header" href="#using-your-network-requester">Using your network requester</a></h2>
<div id="admonition-caution-1" class="admonition warning">
<div class="admonition-title">
<p>Caution</p>
<p><a class="admonition-anchor-link" href="#admonition-caution-1"></a></p>
</div>
<div>
<p>Service Grant grantees should only whitelist a single application - edit your <code>allowed.list</code> accordingly!</p>
</div>
</div>
<p>You can safely share the address of your running <code>nym-client</code> with however you want - if you would like to run a Network Requester for the whole Nym network, give it to us and we can even put it in the Nym documentation.</p>
<p>Is this safe to do? If it was an open proxy, this would be unsafe, because any Nym user could make network requests to any system on the internet.</p>
<p>To make things a bit less stressful for administrators, the Network Requester drops all incoming requests by default. In order for it to make requests, you need to add specific domains to the <code>allowed.list</code> file at <code>$HOME/.nym/service-providers/network-requester/allowed.list</code>.</p>
<p>If you want, you can just use the domains in the default <code>allowed.list</code>, by running this command from the top-level <code>nym</code> code directory:</p>
<pre><code>cp service-providers/network-requester/allowed.list.sample ~/.nym/service-providers/network-requester/allowed.list
</code></pre>
<p>Those URLs will let through requests for the Blockstream Green and Electrum cryptocurrency wallets, as well as the KeyBase chat client.</p>
<blockquote>
<p>If you change your <code>allowed.list</code>, make sure you restart the <code>nym-network-requester.service</code> to pick up the new allowed request list</p>
</blockquote>
<h3 id="adding-urls-for-other-clients"><a class="header" href="#adding-urls-for-other-clients">Adding URLs for other clients</a></h3>
<p>It would suck if Nym was restricted to only three clients. How can we add support for a new application? It’s fairly easy to do.</p>
<p>Have a look in your nym-network-requester config directory:</p>
<pre><code>ls $HOME/.nym/service-providers/network-requester/

# returns: allowed.list  unknown.list
</code></pre>
<p>We already know that <code>allowed.list</code> is what lets requests go through. All unknown requests are logged to <code>unknown.list</code>. If you want to try using a new client type, just start the new application, point it at your local SOCKS5 proxy (configured to use your remote <code>nym-network-requester</code>), and keep copying URLs from <code>unknown.list</code> into <code>allowed.list</code> (it may take multiple tries until you get all of them, depending on the complexity of the application).</p>
<p>If you add support for a new application, we’d love to hear about it: let us know or submit a commented pull request on <code>allowed.list.sample</code>. </p>
<blockquote>
<p>If you are adding custom domains, please note that whilst they may appear in the logs of your network-requester as something like <code>api-0.core.keybaseapi.com:443</code>, you <strong>only need</strong> to include the main domain name, in this instance <code>keybaseapi.com</code></p>
</blockquote>
<h3 id="running-an-open-proxy"><a class="header" href="#running-an-open-proxy">Running an open proxy</a></h3>
<p>If you <em>really</em> want to run an open proxy, perhaps for testing purposes for your own use or among a small group of trusted friends, it is possible to do so. You can disable network checks by passing the flag <code>--open-proxy</code> flag when you run it. If you run in this configuration, you do so at your own risk.</p>
<h2 id="testing-your-network-requester"><a class="header" href="#testing-your-network-requester">Testing your network requester</a></h2>
<ol>
<li>
<p>Add <code>nymtech.net</code> to your <code>allowed.list</code> (remember to restart your network requester). </p>
</li>
<li>
<p>Initialise a local socks5 client with the address of your network requester as the value of the <code>--provider</code> flag, following instructions <a href="../clients/socks5-client.html">here</a></p>
</li>
<li>
<p>In another terminal window, run the following: </p>
</li>
</ol>
<pre><code>curl -x socks5h://localhost:1080 https://nymtech.net/.wellknown/connect/healthcheck.json 
</code></pre>
<p>This command should return the following:</p>
<pre><code>{ &quot;status&quot;: &quot;ok&quot; }
</code></pre>
<h2 id="ports"><a class="header" href="#ports">Ports</a></h2>
<h3 id="requester-port-reference"><a class="header" href="#requester-port-reference">Requester port reference</a></h3>
<p>All requester-specific port configuration can be found in <code>$HOME/.nym/clients/&lt;YOUR_ID&gt;/config/config.toml</code> &amp; <code>$HOME/.nym/service-providers/&lt;YOUR_ID&gt;/config/config.toml</code>. If you do edit any port configs, remember to restart your client and requester processes.</p>
<div class="table-wrapper"><table><thead><tr><th>Default port</th><th>Use</th></tr></thead><tbody>
<tr><td>1789</td><td>Listen for Mixnet traffic</td></tr>
<tr><td>9000</td><td>Listen for Client traffic</td></tr>
</tbody></table>
</div>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../nodes/gateway-setup.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../nodes/validator-setup.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../nodes/gateway-setup.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../nodes/validator-setup.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../theme/pagetoc.js"></script>


    </body>
</html>
