---
sidebar_label: Coconut简介
description: "Nym ensures access control privacy using a sophisticated signature scheme called Coconut."
hide_title:  false
title: Coconut简介
---

### 介绍Coconut

Coconut是一个加密签名方案，可以产生隐私增强的凭证，它让关注资源访问控制的应用程序开发员以一种新的方式来思考和编程。

大多数时候，当我们建立系统安全时，我们考虑的是_who_的问题。

- Alice是否已经确认了自己的身份（认证）？
- Alice是否被允许采取特定行动（授权）？

Coconut从根本上改变了这些问题。它不问用户是谁，而是允许应用程序设计者问不同的问题，主要围绕着_权利_的问题。

- 采取这一行动的实体是否有权利去做？

这提供了一种不同的安全。许多我们每天操作的计算机系统不需要知道*我们是谁*，他们只需要知道我们是否有权利使用该系统。Coconut允许签署机构和验证者一起工作，以确定一个给定的私钥持有人是否有权利采取某种行动，其中的凭证是由去中心化、无信任的系统合作生成的。

一旦凭证生成，它们就可以_再随机化：_生成以前没人见过的全新的凭证，可以提交给服务提供商，并神奇地得到验证，但不会与验证者最初发出的凭证相关联。

这些属性使得Coconut凭证就像OAuth凭证的去中心化和完全私有的版本，或者像由去中心化系统产生的加密不记名代币，这些代币可以变异，使得它们无法被追踪，但仍可在原始权限的情况下进行验证。

尽管验证凭证的系统无法知道用户是谁，但用户可以提交在凭证内编码的加密声明，以获得对资源的安全访问。

### 再随机化和假名

我们站在巨人的肩膀上，十年前，比特币通过允许人们控制资源访问而不需要问_是谁_的问题，给我们指明了前进的方向。但如今却相反，在比特币和后续的区块链中，每一个私钥对应一个_使用权_。

但正如我们现在所看到的，区块链系统中的私钥只是作为一个发现谁在访问资源的小障碍，比特币或以太坊的私钥实际上是一个长期存在的假名，很容易通过连续的交易追踪到。

Coconut允许我们建立真正的私有系统，而不是假名系统。

### Coconut是如何发挥作用的？

就像普通的凭证一样，Nym的Coconut凭证可以用秘钥签名，然后可以被任何拥有正确公钥的人验证。但是，与RSA或DSA等 "常见的 "签名方案相比，Nym凭证有额外的超能力。

具体来说，Coconut是一个盲的、可再随机化的、选择性披露阈值的凭证签名方案，这是一个相当大的概念，所以让我们把它分解为一个个组成部分。

假设你手上有一个内容为`持有此凭证能控制X`的`信息`。除了其他签名方案中常用的`sign(message, secretKey)`和`verify(message, publicKey)`功能外，Coconut增加了以下内容：

1. _[盲签名](https://en.wikipedia.org/wiki/Blind_signature)_ -- 伪装消息内容，使签名者无法看到他们正在签署的内容。这可以保护用户不受签名者的影响：签名的实体无法识别创建特定凭证的用户，因为他们在信息被_屏蔽_（变成乱码）之前从未见过他们要签名的信息。Coconut使用零知识证明，这样签名者就可以在没有看到信息的非屏蔽内容的情况下放心地签名。
2. _可再随机化的签名_ -- 取一个签名，并生成一个全新的签名，此签名拥有相同的基本信息 `持有此凭证能控制X`。再随机化的签名中的二进制信息与原始签名等价，但与之无关联。因此，用户可以多次 "展示 "一个凭证，而每次显示的都是一个新的凭证，与之前的任何 "展示 "都无关联，但再随机化的凭证的基本内容是相同的（包含像对双花攻击的保护），这再一次保护用户免受签名者的伤害，因为签名者无法追踪到他们给用户出示的签名信息，它还可以保护用户不受接受签名凭证的依赖方的影响。用户可以反复出示再随机化的凭证，虽然在任何情况下，包含的信息都是一样的，但通过观察用户多次出示相同的凭证，是没有办法追踪用户的。
4. _选择性披露属性_ -- 允许公钥持有人验证信息的某些部分，但不是全部。例如，你可以有选择地将签名信息的部分内容透露给一些人，但不透露给其他人，这是Coconut的一个非常强大的属性，可能适用于多种应用：投票系统、医疗数据的选择性披露、隐私友好的KYC系统，等等。
4. _[阈值发行](https://en.wikipedia.org/wiki/Threshold_cryptosystem)_ -- 允许将生成签名的过程分散到多个节点并去中心化，因此，要么所有签名者都需要签名（_n of n_，其中_n_是签名者的数量），要么只有阈值数量的签名者需要签署一个消息（_t of n_，其中_t_是阈值）。

综合来看，当有生成和使用签名的加密需求时，这些属性为应用程序提供了隐私。如果你把它与现有的技术相比较，你可以认为Coconut是一种增强的去中心化的隐私友好型[JWT](https://jwt.io/)（JSON Web Token）。

[在这篇博文中](https://medium.com/nymtech/nyms-coconut-credentials-an-overview-4aa4e922cd51)查看更多关于Coconut的介绍。

### 使用Coconut保护区块链交易隐私

在区块链货币系统的背景下，Coconut允许我们创建一个隐私增强的Coconut凭证，它可以证明一定的金额在一个特定实体的控制下，然后，该凭证可以被匿名 "花费"，就像它有原始价值一样。该凭证能够防止双花攻击，因此它只能被消费一次，然后，Nym验证节点可以解锁价值物，以便持有凭证的一方可以赎回它。

虽然仍有工作要做，来与各种区块链整合，但原则上，Coconut可以在任何提供多重签名的系统中对区块链交易进行匿名。我们目前正在进行[Cosmos](https://cosmos.network)的整合，当然，比特币和以太坊也是我们的目标。

Coconut简单而灵活，不仅可以确保转移代币的安全，它还可以为更复杂的智能合约提供隐私保护。

最后，应该提到的是，Coconut可以应用于区块链和非区块链系统 -- 它是一种通用的技术。
